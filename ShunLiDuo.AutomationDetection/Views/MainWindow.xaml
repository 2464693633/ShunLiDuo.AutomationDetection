<Window x:Class="ShunLiDuo.AutomationDetection.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:prism="http://prismlibrary.com/"
        xmlns:converters="clr-namespace:ShunLiDuo.AutomationDetection.Converters"
        Title="é¡ºåˆ©å¤šè‡ªåŠ¨åŒ–æ£€æµ‹ç³»ç»Ÿ" Height="1080" Width="1920"
        WindowStartupLocation="CenterScreen"
        WindowState="Maximized"
        WindowStyle="None"
        AllowsTransparency="False"
        ResizeMode="CanResize"
        Background="{DynamicResource BackgroundBrush}">
    
    <Window.Resources>
        <converters:StringToVisibilityConverter x:Key="StringToVisibilityConverter"/>
        <converters:TagEqualsConverter x:Key="TagEqualsConverter"/>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
        
        <!-- Sidebar Button Style -->
        <Style x:Key="SidebarButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{DynamicResource TextSecondaryBrush}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Margin" Value="8,2"/>
            <Setter Property="Padding" Value="16,12"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="MinHeight" Value="44"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Border"
                                Background="{TemplateBinding Background}"
                                CornerRadius="8"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Left" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="{DynamicResource BackgroundBrush}"/>
                                <Setter Property="Foreground" Value="{DynamicResource TextPrimaryBrush}"/>
                            </Trigger>
                            <!-- Selected State (Primary Style) -->
                            <DataTrigger Value="True">
                                <DataTrigger.Binding>
                                    <MultiBinding Converter="{StaticResource TagEqualsConverter}">
                                        <Binding Path="Tag" RelativeSource="{RelativeSource Self}"/>
                                        <Binding Path="DataContext.CurrentBottomNav" RelativeSource="{RelativeSource AncestorType=Window}"/>
                                    </MultiBinding>
                                </DataTrigger.Binding>
                                <Setter TargetName="Border" Property="Background" Value="{DynamicResource PrimaryLightBrush}"/>
                                <Setter Property="Foreground" Value="{DynamicResource PrimaryBrush}"/>
                                <Setter Property="FontWeight" Value="Medium"/>
                            </DataTrigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- SubMenu Button Style -->
        <Style x:Key="SubMenuButtonStyle" TargetType="Button" BasedOn="{StaticResource SidebarButtonStyle}">
            <Setter Property="Margin" Value="8,1"/>
            <Setter Property="Padding" Value="16,10"/>
            <Setter Property="MinHeight" Value="40"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Border"
                                Background="{TemplateBinding Background}"
                                CornerRadius="6"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Left" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="{DynamicResource BackgroundBrush}"/>
                                <Setter Property="Foreground" Value="{DynamicResource TextPrimaryBrush}"/>
                            </Trigger>
                            <DataTrigger Value="True">
                                <DataTrigger.Binding>
                                    <MultiBinding Converter="{StaticResource TagEqualsConverter}">
                                        <Binding Path="Tag" RelativeSource="{RelativeSource Self}"/>
                                        <Binding Path="DataContext.CurrentLeftNav" RelativeSource="{RelativeSource AncestorType=Window}"/>
                                    </MultiBinding>
                                </DataTrigger.Binding>
                                <Setter TargetName="Border" Property="Background" Value="{DynamicResource PrimaryLightBrush}"/>
                                <Setter Property="Foreground" Value="{DynamicResource PrimaryBrush}"/>
                                <Setter Property="FontWeight" Value="Medium"/>
                            </DataTrigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Window Control Button Style -->
        <Style x:Key="WindowControlButtonStyle" TargetType="Button">
            <Setter Property="Width" Value="46"/>
            <Setter Property="Height" Value="32"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{DynamicResource TextPrimaryBrush}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                         <Border Background="{TemplateBinding Background}">
                             <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                         </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{DynamicResource BackgroundBrush}"/>
                </Trigger>
            </Style.Triggers>
        </Style>

    </Window.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="64"/> <!-- Header + Tabs -->
            <RowDefinition Height="*"/> <!-- Content -->
        </Grid.RowDefinitions>

        <!-- HEADER -->
        <Border Grid.Row="0" 
                Background="White" 
                BorderBrush="{DynamicResource DividerBrush}"
                BorderThickness="0,0,0,1"
                MouseDown="Header_MouseDown">
            <Border.Effect>
                <DropShadowEffect Color="Black" Direction="270" ShadowDepth="2" BlurRadius="6" Opacity="0.05"/>
            </Border.Effect>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <!-- Header Grid -->
                <!-- Col 0: TABS (Now on Left, like browser) -->
                <!-- Col 1: Spacer/Title Area (now just part of Right content) -->
                
                <!-- TABS BAR IN HEADER (MOVED TO COLUMN 0 to be on Left) -->
                <TabControl x:Name="TabControl" 
                           Grid.Column="0"
                           Grid.ColumnSpan="2"
                           ItemsSource="{Binding OpenTabs}"
                           SelectedItem="{Binding SelectedTab}"
                           Background="Transparent"
                           BorderThickness="0"
                           Padding="0"
                           Margin="8,8,0,0"
                           VerticalAlignment="Bottom">
                    <TabControl.ItemTemplate>
                        <DataTemplate>
                            <Border Padding="0">
                                <StackPanel Orientation="Horizontal" Margin="0">
                                    <TextBlock Text="{Binding Title}" 
                                              FontSize="14" 
                                              FontWeight="Medium"
                                              VerticalAlignment="Center"
                                              Margin="0,0,8,0"/>
                                    <Button Content="âœ•" 
                                           FontSize="11"
                                           Width="18"
                                           Height="18"
                                           Padding="0"
                                           Background="Transparent"
                                           BorderThickness="0"
                                           Cursor="Hand"
                                           Click="CloseTabButton_Click"
                                           Tag="{Binding}"
                                           ToolTip="å…³é—­"
                                           VerticalAlignment="Center">
                                        <Button.Style>
                                            <Style TargetType="Button">
                                                <Setter Property="Foreground" Value="{DynamicResource TextTertiaryBrush}"/>
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="Button">
                                                            <Border Background="{TemplateBinding Background}" CornerRadius="9">
                                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                            </Border>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                                <Style.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="Background" Value="{DynamicResource DividerBrush}"/>
                                                        <Setter Property="Foreground" Value="{DynamicResource TextPrimaryBrush}"/>
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Button.Style>
                                    </Button>
                                </StackPanel>
                            </Border>
                        </DataTemplate>
                    </TabControl.ItemTemplate>
                    <TabControl.ContentTemplate>
                        <DataTemplate>
                            <Grid/> 
                        </DataTemplate>
                    </TabControl.ContentTemplate>
                    <TabControl.Style>
                        <Style TargetType="TabControl">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="TabControl">
                                        <Grid>
                                            <TabPanel x:Name="HeaderPanel"
                                                     IsItemsHost="True"
                                                     KeyboardNavigation.TabIndex="1"
                                                     Background="Transparent"/>
                                        </Grid>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                            <Setter Property="ItemContainerStyle">
                                <Setter.Value>
                                    <Style TargetType="TabItem">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="TabItem">
                                                    <Border Name="Border"
                                                           Background="#F5F5F5"
                                                           BorderThickness="1"
                                                           BorderBrush="{DynamicResource DividerBrush}"
                                                           Margin="0,0,8,0"
                                                           Padding="24,8"
                                                           CornerRadius="6">
                                                        <ContentPresenter ContentSource="Header"
                                                                         HorizontalAlignment="Center"
                                                                         VerticalAlignment="Center"/>
                                                    </Border>
                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="IsSelected" Value="True">
                                                            <Setter TargetName="Border" Property="Background" Value="White"/>
                                                            <Setter TargetName="Border" Property="BorderBrush" Value="{DynamicResource PrimaryBrush}"/>
                                                            <Setter TargetName="Border" Property="BorderThickness" Value="1"/>
                                                            <Setter TargetName="Border" Property="TextBlock.FontWeight" Value="Bold"/>
                                                            <Setter TargetName="Border" Property="Effect">
                                                                <Setter.Value>
                                                                    <DropShadowEffect Color="Black" BlurRadius="4" ShadowDepth="1" Opacity="0.1"/>
                                                                </Setter.Value>
                                                            </Setter>
                                                        </Trigger>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter TargetName="Border" Property="Background" Value="#E0E0E0"/>
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </TabControl.Style>
                </TabControl>
            
                 <!-- User Profile AND Title -->
                <StackPanel Grid.Column="2" 
                           Orientation="Horizontal" 
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center"
                           Margin="0,0,24,0">
                           
                    <!-- Moved Title Here -->
                     <TextBlock Text="é¡ºå¤šåˆ©" 
                               FontSize="16" 
                               FontWeight="Bold"
                               Foreground="{DynamicResource TextSecondaryBrush}"
                               VerticalAlignment="Center"
                               Margin="0,0,24,0"/>

                    <Border Background="{DynamicResource BackgroundBrush}" 
                            CornerRadius="20" 
                            Padding="8,4" 
                            Margin="0,0,12,0">
                        <StackPanel Orientation="Horizontal">
                            <!--<Ellipse Width="32" Height="32" Fill="{DynamicResource PrimaryBrush}" Margin="0,0,8,0">
                                <Ellipse.OpacityMask>
                                    <VisualBrush>
                                        <VisualBrush.Visual>
                                            <TextBlock Text="User" FontSize="12" Foreground="White" FontWeight="Bold" 
                                                      HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </VisualBrush.Visual>
                                    </VisualBrush>
                                </Ellipse.OpacityMask>
                            </Ellipse>-->
                            <StackPanel VerticalAlignment="Center" Margin="0,0,8,0">
                                <TextBlock Text="{Binding CurrentUserName, Mode=OneWay, FallbackValue='ç®¡ç†å‘˜'}" 
                                          FontSize="14" 
                                          FontWeight="Medium"
                                          Foreground="{DynamicResource TextPrimaryBrush}"/>
                                <TextBlock FontSize="11" Foreground="{DynamicResource TextTertiaryBrush}">
                                    <Run Text="{Binding CurrentUserEmployeeNo, Mode=OneWay, FallbackValue='001'}"/>
                                    <Run Text=" | "/>
                                    <Run Text="{Binding CurrentUserLoginAccount, Mode=OneWay, FallbackValue='admin'}"/>
                                </TextBlock>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                    
                    <TextBlock x:Name="CurrentTimeText" 
                               FontSize="13" 
                               Foreground="{DynamicResource TextSecondaryBrush}"
                               VerticalAlignment="Center"
                               Margin="12,0,0,0"/>
                </StackPanel>
            
                <!-- Window Controls -->
                <StackPanel Grid.Column="3" 
                           Orientation="Horizontal" 
                           VerticalAlignment="Top"
                           HorizontalAlignment="Right">
                    <Button x:Name="MinimizeButton" 
                            Click="MinimizeButton_Click"
                            Style="{StaticResource WindowControlButtonStyle}"
                            Content="â€”"
                            ToolTip="æœ€å°åŒ–"/>
                    <Button x:Name="MaximizeRestoreButton" 
                            Click="MaximizeRestoreButton_Click"
                            Style="{StaticResource WindowControlButtonStyle}"
                            Content="â–¡"
                            ToolTip="æœ€å¤§åŒ–/è¿˜åŽŸ"/>
                    <Button x:Name="CloseButton" 
                            Click="CloseButton_Click"
                            Style="{StaticResource WindowControlButtonStyle}"
                            Content="âœ•"
                            ToolTip="å…³é—­">
                        <Button.Triggers>
                             <EventTrigger RoutedEvent="MouseEnter">
                                 <BeginStoryboard>
                                     <Storyboard>
                                         <ColorAnimation Storyboard.TargetProperty="(Button.Background).(SolidColorBrush.Color)" To="#FF4D4F" Duration="0:0:0.1"/>
                                         <ColorAnimation Storyboard.TargetProperty="(Button.Foreground).(SolidColorBrush.Color)" To="White" Duration="0:0:0.1"/>
                                     </Storyboard>
                                 </BeginStoryboard>
                             </EventTrigger>
                             <EventTrigger RoutedEvent="MouseLeave">
                                 <BeginStoryboard>
                                     <Storyboard>
                                         <ColorAnimation Storyboard.TargetProperty="(Button.Background).(SolidColorBrush.Color)" To="Transparent" Duration="0:0:0.1"/>
                                         <ColorAnimation Storyboard.TargetProperty="(Button.Foreground).(SolidColorBrush.Color)" To="{StaticResource TitleColor}" Duration="0:0:0.1"/>
                                     </Storyboard>
                                 </BeginStoryboard>
                             </EventTrigger>
                        </Button.Triggers>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- REMOVED ROW 1 -->

        <!-- MAIN CONTENT AREA -->
        <Grid Grid.Row="1" Background="{DynamicResource BackgroundBrush}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="256"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- LEFT SIDEBAR -->
            <Border Grid.Column="0" 
                    Background="White"
                    BorderBrush="{DynamicResource DividerBrush}"
                    BorderThickness="0,0,1,0">
                <ScrollViewer VerticalScrollBarVisibility="Auto" PanningMode="VerticalOnly">
                    <StackPanel Margin="0,16">
                        <!-- ä»»åŠ¡ç®¡ç† -->
                        <Button Tag="TaskManagement" 
                                Style="{StaticResource SidebarButtonStyle}"
                                Command="{Binding NavigateToTaskCommand}">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="ðŸ“‹" FontSize="16" Margin="0,0,10,0" VerticalAlignment="Center"/>
                                <TextBlock Text="ä»»åŠ¡ç®¡ç†" FontSize="14" FontWeight="Medium" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                        
                        <!-- è°ƒåº¦è§„åˆ™ -->
                        <StackPanel>
                            <Button Command="{Binding ToggleRuleManagementExpandedCommand}" 
                                    Style="{StaticResource SidebarButtonStyle}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="âš™ï¸" FontSize="16" Margin="0,0,10,0" VerticalAlignment="Center"/>
                                    <TextBlock Text="è°ƒåº¦è§„åˆ™" FontSize="14" FontWeight="Medium" VerticalAlignment="Center"/>
                                    <TextBlock FontSize="10" Margin="8,0,0,0" VerticalAlignment="Center" Foreground="{DynamicResource TextTertiaryBrush}">
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="Text" Value="â–¼"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding IsRuleManagementExpanded}" Value="False">
                                                        <Setter Property="Text" Value="â–¶"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>
                                </StackPanel>
                            </Button>
                            
                            <StackPanel Visibility="{Binding IsRuleManagementExpanded, Converter={StaticResource BooleanToVisibilityConverter}}">
                                <!--
                                <Button Tag="LogisticsBox" 
                                        Style="{StaticResource SubMenuButtonStyle}"
                                        Command="{Binding NavigateToLogisticsBoxCommand}">
                                    <TextBlock Text="ç‰©æµç›’ç®¡ç†" VerticalAlignment="Center"/>
                                </Button>
                                -->
                                <Button Tag="DetectionRoom" 
                                        Style="{StaticResource SubMenuButtonStyle}"
                                        Command="{Binding NavigateToDetectionRoomCommand}">
                                    <TextBlock Text="æ£€æµ‹å®¤ç®¡ç†" VerticalAlignment="Center"/>
                                </Button>
                                <!--
                                <Button Tag="RuleManagement" 
                                        Style="{StaticResource SubMenuButtonStyle}"
                                        Command="{Binding NavigateToRuleManagementCommand}">
                                    <TextBlock Text="è§„åˆ™ç®¡ç†" VerticalAlignment="Center"/>
                                </Button>
                                -->
                                <Button Tag="CommunicationSettings" 
                                        Style="{StaticResource SubMenuButtonStyle}"
                                        Command="{Binding NavigateToCommunicationSettingsCommand}">
                                    <TextBlock Text="é€šè®¯è®¾ç½®" VerticalAlignment="Center"/>
                                </Button>
                            </StackPanel>
                        </StackPanel>
                        
                        <!-- åŽ†å²æ•°æ® -->
                        <StackPanel>
                            <Button Command="{Binding ToggleHistoryExpandedCommand}" 
                                    Style="{StaticResource SidebarButtonStyle}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ“Š" FontSize="16" Margin="0,0,10,0" VerticalAlignment="Center"/>
                                    <TextBlock Text="åŽ†å²æ•°æ®" FontSize="14" FontWeight="Medium" VerticalAlignment="Center"/>
                                    <TextBlock FontSize="10" Margin="8,0,0,0" VerticalAlignment="Center" Foreground="{DynamicResource TextTertiaryBrush}">
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="Text" Value="â–¼"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding IsHistoryExpanded}" Value="False">
                                                        <Setter Property="Text" Value="â–¶"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>
                                </StackPanel>
                            </Button>
                            
                            <StackPanel Visibility="{Binding IsHistoryExpanded, Converter={StaticResource BooleanToVisibilityConverter}}">
                                <Button Tag="DetectionLog" 
                                        Style="{StaticResource SubMenuButtonStyle}"
                                        Command="{Binding NavigateToDetectionLogCommand}">
                                    <TextBlock Text="æ£€æµ‹åŽ†å²" VerticalAlignment="Center"/>
                                </Button>
                            </StackPanel>
                        </StackPanel>
                        
                        <!-- æŠ¥è­¦ä¸Žå¼‚å¸¸ -->
                        <StackPanel>
                            <Button Command="{Binding ToggleAlarmExpandedCommand}" 
                                    Style="{StaticResource SidebarButtonStyle}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ””" FontSize="16" Margin="0,0,10,0" VerticalAlignment="Center"/>
                                    <TextBlock Text="æŠ¥è­¦ä¸Žå¼‚å¸¸" FontSize="14" FontWeight="Medium" VerticalAlignment="Center"/>
                                     <TextBlock FontSize="10" Margin="8,0,0,0" VerticalAlignment="Center" Foreground="{DynamicResource TextTertiaryBrush}">
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="Text" Value="â–¼"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding IsAlarmExpanded}" Value="False">
                                                        <Setter Property="Text" Value="â–¶"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>
                                </StackPanel>
                            </Button>
                            
                            <StackPanel Visibility="{Binding IsAlarmExpanded, Converter={StaticResource BooleanToVisibilityConverter}}">
                                <Button Tag="DeviceAlarm" 
                                        Style="{StaticResource SubMenuButtonStyle}"
                                        Command="{Binding NavigateToDeviceAlarmCommand}">
                                    <TextBlock Text="è®¾å¤‡æŠ¥è­¦" VerticalAlignment="Center"/>
                                </Button>
                            </StackPanel>
                        </StackPanel>
                        
                         <!-- ç³»ç»Ÿè®¾ç½® -->
                        <StackPanel>
                            <Button Command="{Binding ToggleSystemSettingsExpandedCommand}" 
                                    Style="{StaticResource SidebarButtonStyle}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ”§" FontSize="16" Margin="0,0,10,0" VerticalAlignment="Center"/>
                                    <TextBlock Text="ç³»ç»Ÿè®¾ç½®" FontSize="14" FontWeight="Medium" VerticalAlignment="Center"/>
                                    <TextBlock FontSize="10" Margin="8,0,0,0" VerticalAlignment="Center" Foreground="{DynamicResource TextTertiaryBrush}">
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="Text" Value="â–¼"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding IsSystemSettingsExpanded}" Value="False">
                                                        <Setter Property="Text" Value="â–¶"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>
                                </StackPanel>
                            </Button>
                            
                            <StackPanel Visibility="{Binding IsSystemSettingsExpanded, Converter={StaticResource BooleanToVisibilityConverter}}">

                                <Button Tag="AccountManagement" 
                                        Style="{StaticResource SubMenuButtonStyle}"
                                        Command="{Binding NavigateToAccountManagementCommand}"
                                        Visibility="{Binding CanAccessAccountManagement, Converter={StaticResource BooleanToVisibilityConverter}}">
                                    <TextBlock Text="è´¦æˆ·ç®¡ç†" VerticalAlignment="Center"/>
                                </Button>

                                <Button Tag="RoleManagement" 
                                        Style="{StaticResource SubMenuButtonStyle}"
                                        Command="{Binding NavigateToRoleManagementCommand}"
                                        Visibility="{Binding CanAccessRoleManagement, Converter={StaticResource BooleanToVisibilityConverter}}">
                                    <TextBlock Text="è§’è‰²ç®¡ç†" VerticalAlignment="Center"/>
                                </Button>
                            </StackPanel>
                        </StackPanel>

                    </StackPanel>
                </ScrollViewer>
            </Border>

            <!-- REGION CONTENT -->
            <ContentControl Grid.Column="1" 
                          prism:RegionManager.RegionName="MainContentRegion"
                          Margin="16"/> 
        </Grid>
    </Grid>
</Window>
